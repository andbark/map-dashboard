{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewbarksdale/Desktop/Map%20Dashboard/map-dashboard/src/components/Map.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { School, MapViewport } from '@/types';\n\n// Custom component to update map view when props change\nfunction ChangeView({ center, zoom }: MapViewport) {\n  const map = useMap();\n  useEffect(() => {\n    map.setView(center, zoom);\n  }, [center, zoom, map]);\n  return null;\n}\n\ninterface MapProps {\n  schools: School[];\n  viewport: MapViewport;\n}\n\nexport default function Map({ schools, viewport }: MapProps) {\n  const [isMapInitialized, setIsMapInitialized] = useState(false);\n\n  // Fix Leaflet icon issues with Next.js\n  useEffect(() => {\n    // @ts-ignore\n    delete L.Icon.Default.prototype._getIconUrl;\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: '/marker-icon-2x.png',\n      iconUrl: '/marker-icon.png',\n      shadowUrl: '/marker-shadow.png',\n    });\n    \n    setIsMapInitialized(true);\n  }, []);\n\n  if (!isMapInitialized) {\n    return (\n      <div className=\"h-full w-full flex items-center justify-center bg-gray-50\">\n        <p className=\"text-black\">Initializing map...</p>\n      </div>\n    );\n  }\n\n  const schoolsWithCoordinates = schools.filter(school => \n    school.latitude !== undefined && school.longitude !== undefined\n  );\n\n  return (\n    <MapContainer\n      center={viewport.center}\n      zoom={viewport.zoom}\n      style={{ height: '100%', width: '100%', minHeight: '600px' }}\n      className=\"z-0\"\n    >\n      <ChangeView center={viewport.center} zoom={viewport.zoom} />\n      \n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      \n      {schoolsWithCoordinates.map((school) => (\n        <Marker \n          key={school.id || `${school.name}-${school.address}`}\n          position={[school.latitude!, school.longitude!]}\n        >\n          <Popup>\n            <div className=\"p-1\">\n              <h3 className=\"font-bold text-black\">{school.name}</h3>\n              <p className=\"text-sm text-gray-700 mt-1\">{school.district}</p>\n              <p className=\"text-sm text-gray-900\">{school.address}</p>\n              <p className=\"text-sm text-gray-900\">{school.city}, {school.state} {school.zipCode}</p>\n            </div>\n          </Popup>\n        </Marker>\n      ))}\n    </MapContainer>\n  );\n} "],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;AAIA,wDAAwD;AACxD,SAAS,WAAW,EAAE,MAAM,EAAE,IAAI,EAAe;;IAC/C,MAAM,MAAM,CAAA,GAAA,mJAAA,CAAA,SAAM,AAAD;IACjB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,OAAO,CAAC,QAAQ;QACtB;+BAAG;QAAC;QAAQ;QAAM;KAAI;IACtB,OAAO;AACT;GANS;;QACK,mJAAA,CAAA,SAAM;;;KADX;AAaM,SAAS,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAY;;IACzD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,uCAAuC;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,aAAa;YACb,OAAO,oJAAA,CAAA,UAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW;YAC3C,oJAAA,CAAA,UAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;gBAC1B,eAAe;gBACf,SAAS;gBACT,WAAW;YACb;YAEA,oBAAoB;QACtB;wBAAG,EAAE;IAEL,IAAI,CAAC,kBAAkB;QACrB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAa;;;;;;;;;;;IAGhC;IAEA,MAAM,yBAAyB,QAAQ,MAAM,CAAC,CAAA,SAC5C,OAAO,QAAQ,KAAK,aAAa,OAAO,SAAS,KAAK;IAGxD,qBACE,6LAAC,0JAAA,CAAA,eAAY;QACX,QAAQ,SAAS,MAAM;QACvB,MAAM,SAAS,IAAI;QACnB,OAAO;YAAE,QAAQ;YAAQ,OAAO;YAAQ,WAAW;QAAQ;QAC3D,WAAU;;0BAEV,6LAAC;gBAAW,QAAQ,SAAS,MAAM;gBAAE,MAAM,SAAS,IAAI;;;;;;0BAExD,6LAAC,uJAAA,CAAA,YAAS;gBACR,aAAY;gBACZ,KAAI;;;;;;YAGL,uBAAuB,GAAG,CAAC,CAAC,uBAC3B,6LAAC,oJAAA,CAAA,SAAM;oBAEL,UAAU;wBAAC,OAAO,QAAQ;wBAAG,OAAO,SAAS;qBAAE;8BAE/C,cAAA,6LAAC,mJAAA,CAAA,QAAK;kCACJ,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAwB,OAAO,IAAI;;;;;;8CACjD,6LAAC;oCAAE,WAAU;8CAA8B,OAAO,QAAQ;;;;;;8CAC1D,6LAAC;oCAAE,WAAU;8CAAyB,OAAO,OAAO;;;;;;8CACpD,6LAAC;oCAAE,WAAU;;wCAAyB,OAAO,IAAI;wCAAC;wCAAG,OAAO,KAAK;wCAAC;wCAAE,OAAO,OAAO;;;;;;;;;;;;;;;;;;mBARjF,OAAO,EAAE,IAAI,GAAG,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,OAAO,EAAE;;;;;;;;;;;AAe9D;IA3DwB;MAAA","debugId":null}}]
}